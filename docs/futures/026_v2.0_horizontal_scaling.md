# Horizontal Scaling with Queue

> **Versão Target:** V2.0
> **Status:** ⏳ Pendente
> **Owner:** Unassigned
> **Estimativa:** 50h

---

## Descrição

Pipeline roda sincronamente. Bottleneck em alto volume. Precisa de arquitetura para 10x-100x de traffic.

---

## Passos de Implementação

### 1. Código

- [ ] `src/queue/message_producer.py`: Publicar mensagens na fila
- [ ] `src/queue/message_consumer.py`: Worker que processa da fila
- [ ] `src/api/ingest_routes.py`: Mudar para enqueue ao invés de processar inline
- [ ] `worker.py`: Entry point para workers

### 2. Testes

- [ ] Load tests: 1000 tickets/min
- [ ] Integration tests: Producer/consumer flow

### 3. Documentação

- [ ] `docs/SCALING.md`: Arquitetura de scaling
- [ ] Atualizar DEPLOYMENT.md

### 4. Infraestrutura

- [ ] RabbitMQ ou AWS SQS setup
- [ ] Kubernetes manifests para workers
- [ ] Auto-scaling policies
- [ ] Queue monitoring (depth, processing time)

---

## Dependências

- Docker/K8s deployment estável

---

## Notas de Expansão

- Priority queues (critical tickets first)
- Dead letter queue for failures
- Queue depth monitoring & alerting
- Multi-region queue replication

---

## Referências

- [FEATURE_RESEARCH.md](../FEATURE_RESEARCH.md)
